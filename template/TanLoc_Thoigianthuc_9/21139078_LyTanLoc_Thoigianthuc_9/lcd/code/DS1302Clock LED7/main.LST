C51 COMPILER V9.01   MAIN                                                                  08/29/2013 14:11:57 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          /*******************************************************************************
   2          * 实验名         : 万年历实验
   3          * 使用的IO       : 
   4          * 实验效果       :1602显示时钟
   5          * 注意           ：
   6          *******************************************************************************/
   7          
   8          #include<reg51.h>
   9          #include"lcd.h"
  10          #include"ds1302.h"
  11          
  12          void LcdDisplay();
  13          
  14          /*******************************************************************************
  15          * 函数名         : main
  16          * 函数功能       : 主函数
  17          * 输入           : 无
  18          * 输出           : 无
  19          *******************************************************************************/
  20          
  21          void main()
  22          {
  23   1        LcdInit();
  24   1        Ds1302Init();
  25   1        while(1)
  26   1        { 
  27   2          Ds1302ReadTime();
  28   2          LcdDisplay(); 
  29   2        }
  30   1        
  31   1      }
  32          /*******************************************************************************
  33          * 函数名         : LcdDisplay()
  34          * 函数功能       : 显示函数
  35          * 输入           : 无
  36          * 输出           : 无
  37          *******************************************************************************/
  38          
  39          void LcdDisplay()
  40          {
  41   1        LcdWriteCom(0x80+0X40);
  42   1        LcdWriteData('0'+TIME[2]/16);       //时
  43   1        LcdWriteData('0'+(TIME[2]&0x0f));        
  44   1        LcdWriteData('-');
  45   1        LcdWriteData('0'+TIME[1]/16);       //分
  46   1        LcdWriteData('0'+(TIME[1]&0x0f)); 
  47   1        LcdWriteData('-');
  48   1        LcdWriteData('0'+TIME[0]/16);       //秒
  49   1        LcdWriteData('0'+(TIME[0]&0x0f));
  50   1      
  51   1        LcdWriteCom(0x80);
  52   1        LcdWriteData('2');
  53   1        LcdWriteData('0');
  54   1        LcdWriteData('0'+TIME[6]/16);     //年
  55   1        LcdWriteData('0'+(TIME[6]&0x0f));
C51 COMPILER V9.01   MAIN                                                                  08/29/2013 14:11:57 PAGE 2   

  56   1        LcdWriteData('-');
  57   1        LcdWriteData('0'+TIME[4]/16);     //月
  58   1        LcdWriteData('0'+(TIME[4]&0x0f));
  59   1        LcdWriteData('-');
  60   1        LcdWriteData('0'+TIME[3]/16);     //日
  61   1        LcdWriteData('0'+(TIME[3]&0x0f));
  62   1        LcdWriteCom(0x8D);
  63   1        LcdWriteData('0'+(TIME[5]&0x07)); //星期       
  64   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    195    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
