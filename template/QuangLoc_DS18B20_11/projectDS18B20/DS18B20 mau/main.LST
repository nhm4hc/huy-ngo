C51 COMPILER V9.60.0.0   MAIN                                                              11/17/2023 01:26:26 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include<reg51.h>
   2          #include"lcd.h"
   3          #include"temp.h"
   4          void LcdDisplay(int);
   5          
   6          void main()
   7          {
   8   1        LcdInit();           // Khoi tao LCD1602
   9   1        LcdWriteCom(0x88);  // Ghi dia chi 80 chi dia chi bat dau
  10   1        LcdWriteData('C'); 
  11   1        while(1)
  12   1        {
  13   2          LcdDisplay(Ds18b20ReadTemp());
  14   2          // Delay1ms(1000);// Tra 1 giây, cap nhat moi 1 giây
  15   2        }
  16   1      }
  17          
  18          void LcdDisplay(int temp)   // lcd hien thi
  19          {
  20   1        
  21   1          unsigned char datas[] = {0, 0, 0, 0, 0}; // Ðinh nghia mang so
  22   1          float tp;  
  23   1          if(temp< 0)          // Khi nhiet do là so âm
  24   1          {
  25   2              LcdWriteCom(0x80);    // Ghi dia chi 80 chi dia chi bat dau
  26   2              LcdWriteData('-');    // Hien thi dau tru
  27   2              // Vì nhiet do doc duoc là mã bù thuc te, giam 1, sau dó lay mã bù cua giá tri goc
  28   2              temp=temp-1;
  29   2              temp=~temp;
  30   2              tp=temp;
  31   2              temp=tp*0.0625*100+0.5;  
  32   2              // Ðe lai hai chi so thap phân nhân 100, cong 0.5 de làm tròn
  33   2              
  34   2          }
  35   1          else
  36   1          {         
  37   2              LcdWriteCom(0x80);    // Ghi dia chi 80 chi dia chi bat dau
  38   2              LcdWriteData('+');    // Hien thi dau cong
  39   2              tp=temp;
  40   2              temp=tp*0.0625*100+0.5;  
  41   2              // Tuong tu nhu trên, làm tròn so
  42   2          }
  43   1          // Chia và lay du du tách tung so và hien thi lên LCD
  44   1          datas[0] = temp / 10000;
  45   1          datas[1] = temp % 10000 / 1000;
  46   1          datas[2] = temp % 1000 / 100;
  47   1          datas[3] = temp % 100 / 10;
  48   1          datas[4] = temp % 10;
  49   1      
  50   1          LcdWriteCom(0x82);      // Ghi dia chi 82
  51   1          LcdWriteData('0'+datas[0]); // Hien thi hàng chuc nghìn
  52   1      
  53   1          LcdWriteCom(0x83);      // Ghi dia chi 83
  54   1          LcdWriteData('0'+datas[1]); // Hien thi hàng nghìn
  55   1      
C51 COMPILER V9.60.0.0   MAIN                                                              11/17/2023 01:26:26 PAGE 2   

  56   1          LcdWriteCom(0x84);      // Ghi dia chi 84
  57   1          LcdWriteData('0'+datas[2]); // Hien thi hàng tram
  58   1      
  59   1          LcdWriteCom(0x85);      // Ghi dia chi 85
  60   1          LcdWriteData('.');      // HHien thi dau cham
  61   1      
  62   1          LcdWriteCom(0x86);      // Ghi dia chi 86
  63   1          LcdWriteData('0'+datas[3]); // Hien thi chu so thap phân
  64   1      
  65   1          LcdWriteCom(0x87);      // Ghi dia chi 87
  66   1          LcdWriteData('0'+datas[4]); // Hien thi chu so thap phân thu hai
  67   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    318    ----
   CONSTANT SIZE    =      5    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      11
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
