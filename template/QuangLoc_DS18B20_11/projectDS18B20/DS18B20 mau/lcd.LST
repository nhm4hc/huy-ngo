C51 COMPILER V9.60.0.0   LCD                                                               11/17/2023 01:26:26 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LCD
OBJECT MODULE PLACED IN lcd.OBJ
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE lcd.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include "lcd.h"  // Bao gom file header cho LCD
   2          
   3          // Ham delay, chi tre khoang 1ms moi lan goi
   4          void Lcd1602_Delay1ms(uint c)   // Sai so 0us
   5          {
   6   1          uchar a,b;
   7   1          for (; c>0; c--)
   8   1          {
   9   2               for (b=199;b>0;b--)
  10   2               {
  11   3                    for(a=1;a>0;a--);
  12   3               }      
  13   2          } 
  14   1      }
  15          
  16          // Ham viet lenh cho LCD
  17          #ifndef LCD1602_4PINS   // Neu khong dinh nghia che do 4 chan
              void LcdWriteCom(uchar com)    // Viet lenh
              {
                  LCD1602_E = 0;     // Kich hoat tin hieu Enable
                  LCD1602_RS = 0;    // Chon che do viet lenh
                  LCD1602_RW = 0;    // Chon che do viet
                  
                  LCD1602_DATAPINS = com;     // Dat lenh vao cong du lieu
                  Lcd1602_Delay1ms(1);        // Doi du lieu on dinh
              
                  LCD1602_E = 1;              // Bat dau truyen du lieu
                  Lcd1602_Delay1ms(5);        // Giu tin hieu trong mot khoang thoi gian
                  LCD1602_E = 0;
              }
              #else 
  32          void LcdWriteCom(uchar com)    // Viet lenh cho che do 4 chan
  33          {
  34   1          // Tuong tu nhu tren nhung thuc hien voi 4 chan
  35   1        LCD1602_E = 0;   
  36   1        LCD1602_RS = 0;  
  37   1        LCD1602_RW = 0;  
  38   1      
  39   1        LCD1602_DATAPINS = com; 
  40   1        Lcd1602_Delay1ms(1);
  41   1      
  42   1        LCD1602_E = 1;   
  43   1        Lcd1602_Delay1ms(5);
  44   1        LCD1602_E = 0;
  45   1      
  46   1      //  Lcd1602_Delay1ms(1);
  47   1        LCD1602_DATAPINS = com << 4; 
  48   1        Lcd1602_Delay1ms(1);
  49   1      
  50   1        LCD1602_E = 1;   
  51   1        Lcd1602_Delay1ms(5);
  52   1        LCD1602_E = 0;
  53   1      }
  54          #endif
  55          
C51 COMPILER V9.60.0.0   LCD                                                               11/17/2023 01:26:26 PAGE 2   

  56          // Ham viet du lieu len LCD
  57          #ifndef LCD1602_4PINS
              void LcdWriteData(uchar dat)   // Viet du lieu
              {
                  // Tuong tu ham LcdWriteCom nhung danh cho viec viet du lieu
                  LCD1602_E = 0;  
                LCD1602_RS = 1; 
                LCD1602_RW = 0; 
              
                LCD1602_DATAPINS = dat; 
                Lcd1602_Delay1ms(1);
              
                LCD1602_E = 1;   
                Lcd1602_Delay1ms(5);  
                LCD1602_E = 0;
              }
              #else
  73          void LcdWriteData(uchar dat)   // Viet du lieu cho che do 4 chan
  74          {
  75   1          // Tuong tu nhu tren nhung thuc hien voi 4 chan
  76   1        LCD1602_E = 0;    
  77   1        LCD1602_RS = 1;   
  78   1        LCD1602_RW = 0;  
  79   1      
  80   1        LCD1602_DATAPINS = dat; 
  81   1        Lcd1602_Delay1ms(1);
  82   1      
  83   1        LCD1602_E = 1;   
  84   1        Lcd1602_Delay1ms(5);
  85   1        LCD1602_E = 0;
  86   1      
  87   1        LCD1602_DATAPINS = dat << 4; 
  88   1        Lcd1602_Delay1ms(1);
  89   1      
  90   1        LCD1602_E = 1;  
  91   1        Lcd1602_Delay1ms(5);
  92   1        LCD1602_E = 0;
  93   1      }
  94          #endif
  95          
  96          // Ham khoi tao LCD
  97          #ifndef LCD1602_4PINS
              void LcdInit()  // Khoi tao LCD cho che do 8 chan
              {
                  // Gui lenh khoi tao LCD voi cac thiet lap cu the
                LcdWriteCom(0x38); 
                LcdWriteCom(0x0c); 
                LcdWriteCom(0x06); 
                LcdWriteCom(0x01); 
                LcdWriteCom(0x80); 
              }
              #else
 108          void LcdInit()  // Khoi tao LCD cho che do 4 chan
 109          {
 110   1          // Gui lenh khoi tao LCD voi cac thiet lap cu the cho che do 4 chan
 111   1          LcdWriteCom(0x32);  
 112   1        LcdWriteCom(0x28);   
 113   1        LcdWriteCom(0x0c); 
 114   1        LcdWriteCom(0x06);  
 115   1        LcdWriteCom(0x01);  
 116   1        LcdWriteCom(0x80);  
 117   1      }
C51 COMPILER V9.60.0.0   LCD                                                               11/17/2023 01:26:26 PAGE 3   

 118          #endif


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    142    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
