C51 COMPILER V9.60.0.0   MODULE_3                                                          12/11/2023 13:16:37 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MODULE_3
OBJECT MODULE PLACED IN .\Objects\module_3.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE module_3.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\
                    -module_3.lst) TABS(2) OBJECT(.\Objects\module_3.obj)

line level    source

   1          #include "module_3.h"
   2          
   3          void At24c02Write(unsigned char addr,unsigned char dat){
   4   1        I2cStart();
   5   1        I2cSendByte(0xa2);//·// ten eeprom
   6   1        I2cSendByte(addr);//·dia chi trong eeprom
   7   1        I2cSendByte(dat); //·data eeprom
   8   1        I2cStop();
   9   1      }
  10          
  11          unsigned char At24c02Read(unsigned char addr){
  12   1        unsigned char num;
  13   1        I2cStart();
  14   1        I2cSendByte(0xa2); 
  15   1        I2cSendByte(addr); 
  16   1        I2cStart();
  17   1        I2cSendByte(0xa3); 
  18   1        num = I2cReadByte(); 
  19   1        I2cStop();
  20   1        return num; 
  21   1      }
  22          
  23          void module3_Delay1ms(void)   
  24          {
  25   1          unsigned char a,b,c;
  26   1          for(c=1;c>0;c--)
  27   1              for(b=142;b>0;b--)
  28   1                  for(a=2;a>0;a--);
  29   1      }
  30          
  31          void Timer0Configuration(void){
  32   1        Num = 0;
  33   1        TMOD=0X02;
  34   1        TH0=0X9C; 
  35   1        TL0=0X9C; 
  36   1        ET0=1;
  37   1        EA=1;
  38   1        TR0=1;  
  39   1      }
  40          
  41          void DigDisplay(void) interrupt 1{ 
  42   1        P1 = disp[7];
  43   1        switch(Num)  
  44   1        {
  45   2          case(7):
  46   2            module3_LSA=0; module3_LSB=0; module3_LSC=0; break;
  47   2          case(6):
  48   2            module3_LSA=1; module3_LSB=0; module3_LSC=0; break;
  49   2          case(5):
  50   2            module3_LSA=0; module3_LSB=1; module3_LSC=0; break;
  51   2          case(4):
  52   2            module3_LSA=1; module3_LSB=1; module3_LSC=0; break;
  53   2          case(3):
  54   2            module3_LSA=0; module3_LSB=0; module3_LSC=1; break;
C51 COMPILER V9.60.0.0   MODULE_3                                                          12/11/2023 13:16:37 PAGE 2   

  55   2          case(2):
  56   2            module3_LSA=1; module3_LSB=0; module3_LSC=1; break;
  57   2          case(1):
  58   2            module3_LSA=0; module3_LSB=1; module3_LSC=1; break;
  59   2          case(0):
  60   2            module3_LSA=1; module3_LSB=1; module3_LSC=1; break; 
  61   2        }
  62   1        DIG = disp[Num]; 
  63   1        Num++;
  64   1        if(Num>7)
  65   1          Num=0;
  66   1      }
  67          
  68          void module_3(void){
  69   1        unsigned int num0 = 0, num1 = 0, n = 0;
  70   1        Timer0Configuration();
  71   1        if(module3_K1==0)   // ghi giá tri vào eeprom
  72   1        {
  73   2          module3_Delay1ms();
  74   2          if(module3_K1==0)
  75   2            At24c02Write(2,num0);
  76   2          while((n<200)&&(module3_K3==0))
  77   2          {
  78   3            n++;
  79   3            module3_Delay1ms(); 
  80   3          }     
  81   2          n=0;
  82   2          n=0;
  83   2        }
  84   1          
  85   1        if(module3_K2 == 0)   // doc giá tri tu eeprom
  86   1        {
  87   2          module3_Delay1ms();
  88   2          if(module3_K2 == 0)
  89   2            num0=At24c02Read(2);
  90   2          while((n<200)&&(module3_K3 == 0))
  91   2          {
  92   3            n++;
  93   3            module3_Delay1ms(); 
  94   3          }     
  95   2          n=0;
  96   2        }     
  97   1        if(module3_K3 == 0)
  98   1        {
  99   2          module3_Delay1ms();
 100   2          if(module3_K3 == 0)
 101   2            num0++;
 102   2          while((n<200)&&(module3_K3 == 0))
 103   2          {
 104   3            n++;
 105   3            module3_Delay1ms(); 
 106   3          }     
 107   2          n=0;
 108   2          if(num0==256)
 109   2            num0=0;
 110   2        }
 111   1            
 112   1        if(module3_K4==0)
 113   1        {
 114   2          module3_Delay1ms();
 115   2          if(module3_K4==0)
 116   2            num0=0;
C51 COMPILER V9.60.0.0   MODULE_3                                                          12/11/2023 13:16:37 PAGE 3   

 117   2          while((n<200)&&(module3_K3==0))
 118   2          {
 119   3            n++;
 120   3            module3_Delay1ms(); 
 121   3          }     
 122   2          n=0;
 123   2        }     
 124   1        disp[0]=DIG_CODE[num1/1000];//Ç§Î»
 125   1        disp[1]=DIG_CODE[num1%1000/100];//°ÙÎ»
 126   1        disp[2]=DIG_CODE[num1%1000%100/10];//Ê®Î»
 127   1        disp[3]=DIG_CODE[num1%1000%100%10];//¸öÎ»
 128   1        disp[4]=DIG_CODE[num0/1000];//Ç§Î»
 129   1        disp[5]=DIG_CODE[num0%1000/100];//°ÙÎ»
 130   1        disp[6]=DIG_CODE[num0%1000%100/10];//¸öÎ»
 131   1        disp[7]=DIG_CODE[num0%1000%100%10];
 132   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    747    ----
   CONSTANT SIZE    =     10    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      9      10
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
